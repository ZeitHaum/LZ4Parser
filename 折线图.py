import numpy as np
import matplotlib.pyplot as plt

plt.rcParams['font.family'] = ['sans-serif']
plt.rcParams['font.size'] = '16'
plt.rcParams['font.sans-serif'] = ['SimSun']

# 数据
x = range(1,51,1)

# --------------------CPU FTL延迟---------------------
title = '占用空间随行数变化图'
data = {
    "line1_size":[113.500000, 102.000000, 80.500000, 95.000000, 91.500000, 67.000000, 77.000000, 68.500000, 87.000000, 72.000000, 68.500000, 58.500000, 52.000000, 71.000000, 52.500000, 58.625000, 60.000000, 55.006579, 67.368421, 69.500000, 69.500000, 75.500000, 65.000000, 69.125000, 57.625000, 55.750000, 72.125000, 61.625000, 54.875000, 54.375000, 63.125000, 56.500000, 61.500000, 66.000000, 54.875000, 66.500000, 59.625000, 49.875000, 61.125000, 75.500000, 52.500000, 55.875000, 58.000000, 64.625000, 66.375000, 52.000000, 55.000000, 53.500000, 54.125000, 70.375000, ],
    "line2_size":[62.500000, 60.000000, 54.500000, 64.000000, 59.125000, 62.000000, 70.000000, 52.250000, 68.000000, 67.000000, 84.416667, 67.437500, 49.000000, 111.500000, 47.875000, 58.000000, 56.875000, 43.236111, 68.875000, 64.500000, 60.562500, 75.125000, 74.625000, 58.500000, 51.875000, 50.875000, 74.125000, 88.375000, 68.708334, 62.250000, 69.500000, 68.125000, 69.500000, 65.375001, 57.375000, 54.625000, 57.500000, 54.000000, 63.125000, 64.375000, 53.000000, 55.875000, 81.000000, 62.500000, 62.500000, 84.500000, 55.763889, 57.000000, 48.000000, 70.250000, ],
    # "accum1_size":[113.500000, 215.500000, 296.000000, 391.000000, 482.500000, 549.500000, 626.500000, 695.000000, 782.000000, 854.000000, 922.500000, 981.000001, 1033.000000, 1104.000000, 1156.500000, 1215.125000, 1275.125001, 1330.131580, 1397.500001, 1467.000001, 1536.500000, 1612.000000, 1677.000001, 1746.125001, 1803.750001, 1859.500000, 1931.625001, 1993.250000, 2048.125000, 2102.500000, 2165.625000, 2222.125000, 2283.625001, 2349.625001, 2404.500001, 2471.000002, 2530.625002, 2580.500002, 2641.625002, 2717.125002, 2769.625002, 2825.500002, 2883.500002, 2948.125003, 3014.500003, 3066.500003, 3121.500003, 3175.000003, 3229.125003, 3299.500003, ],
    # "accum2_size":[62.500000, 122.500001, 177.000000, 241.000000, 300.125001, 362.125001, 432.125001, 484.375001, 552.375001, 619.375001, 703.791668, 771.229168, 820.229168, 931.729168, 979.604168, 1037.604168, 1094.479168, 1137.715279, 1206.590279, 1271.090279, 1331.652780, 1406.777780, 1481.402780, 1539.902780, 1591.777780, 1642.652780, 1716.777780, 1805.152780, 1873.861114, 1936.111114, 2005.611114, 2073.736114, 2143.236114, 2208.611114, 2265.986114, 2320.611115, 2378.111115, 2432.111115, 2495.236115, 2559.611115, 2612.611115, 2668.486115, 2749.486115, 2811.986115, 2874.486115, 2958.986115, 3014.750005, 3071.750005, 3119.750005, 3190.000005, ],
}
ylabel = '实际空间'
xlabel = '行数'

print(len(x))
print(len(data['line1_size']))

# 提取所有值到一个列表中
all_values = [value for values in data.values() for value in values]

# 找到列表中的最大值
max_y = max(all_values)
    
val_x = range(len(x))
bar_width = 0.1

# 绘制折线图
fig, ax = plt.subplots(figsize=(8, 6))

for label, values in data.items():
    ax.plot(val_x, values, marker='o', label=label)

ax.set_xlabel(xlabel)
ax.set_ylabel(ylabel)
# ax.set_title(title)
ax.set_ylim(0, max_y * 1.6)
ax.set_xticks(val_x)
ax.set_xticklabels(x)
ax.grid(False)
ax.legend(loc='upper right', bbox_to_anchor=(1, 1))
plt.show()
fig.savefig(title + '.pdf', format='pdf', dpi=150)
